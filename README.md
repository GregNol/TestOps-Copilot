# ü§ñ TestOps-Copilot

**TestOps-Copilot** ‚Äî —ç—Ç–æ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ –±–∞–∑–µ –º–æ–¥–µ–ª–∏ **Qwen3-Coder**. –°–µ—Ä–≤–∏—Å –ø–æ–º–æ–≥–∞–µ—Ç QA-–∏–Ω–∂–µ–Ω–µ—Ä–∞–º –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç-–ø–ª–∞–Ω—ã, –ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã (Pytest) –∏ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Ä–µ–≤—å—é –∫–æ–¥–∞.

---

## üìë –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–î–ª—è Frontend –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: API Endpoints](#-–¥–ª—è-frontend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤-api-endpoints)
2. [User Flows (–°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)](#-user-flows-—Å—Ü–µ–Ω–∞—Ä–∏–∏-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
3. [–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (Backend)](#-–ª–æ–∫–∞–ª—å–Ω—ã–π-–∑–∞–ø—É—Å–∫-backend)
4. [–ó–∞–ø—É—Å–∫ –≤ Docker](#-–∑–∞–ø—É—Å–∫-–≤-docker)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (Production)](#-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-nginx-production)

---

## üîå –î–ª—è Frontend –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: API Endpoints

**Base URL:** `http://localhost:8080/api/v1/ai`

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–∫—Ä–æ–º–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞) –ø—Ä–∏–Ω–∏–º–∞—é—Ç –∏ –æ—Ç–¥–∞—é—Ç JSON.

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è UI –¢–µ—Å—Ç-–ø–ª–∞–Ω–∞
–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç URL (—Å–∫–∞—á–∏–≤–∞–µ—Ç HTML –Ω–∞ –±—ç–∫–µ–Ω–¥–µ) –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Ä—É—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤.

*   **URL:** `/generate-ui-tests`
*   **Method:** `POST`
*   **Body (JSON):**
    ```json
    {
      "url": "https://example.com/login",
      "general_description": "–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏",
      "modules": "–§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞, –∫–Ω–æ–ø–∫–∞ '–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å'",
      "buttons_description": "–ö–Ω–æ–ø–∫–∞ Submit —Å–∏–Ω–µ–≥–æ —Ü–≤–µ—Ç–∞",
      "special_scenarios": "–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ 3 –ø–æ–ø—ã—Ç–æ–∫"
    }
    ```
*   **Response:** JSON `{"message": "Markdown Table String..."}`.
*   **UI Hint:** –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ Markdown-—Ä–µ–Ω–¥–µ—Ä–µ—Ä.

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è API –¢–µ—Å—Ç-–ø–ª–∞–Ω–∞ (Swagger)
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–∞–π–ª —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–∞—Ç—Ä–∏—Ü—É –ø–æ–∫—Ä—ã—Ç–∏—è.

*   **URL:** `/generate-api-tests`
*   **Method:** `POST`
*   **Content-Type:** `multipart/form-data` (–í–∞–∂–Ω–æ!)
*   **FormData:**
    *   `file`: (File) –§–∞–π–ª `swagger.json` –∏–ª–∏ `openapi.yaml`.
    *   `general_description`: (Text) "API —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏".
    *   `modules`: (Text) "Auth, Orders".
*   **Response:** JSON `{"message": "Markdown Table String..."}`.

### 3. –†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (Human-in-the-loop)
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–Ω–µ—Å–µ–Ω–∏—è –ø—Ä–∞–≤–æ–∫ –≤ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ AI. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –ø—Ä–æ–º–ø—Ç, AI –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç.

*   **URL:** `/redact-content`
*   **Method:** `POST`
*   **Body (JSON):**
    ```json
    {
      "original_content": "| ID | Steps | ... (—Ç–µ–∫—É—â–∏–π markdown)",
      "edit_instructions": "–î–æ–±–∞–≤—å –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–π —Ç–µ—Å—Ç –Ω–∞ –ø—É—Å—Ç–æ–π –ø–∞—Ä–æ–ª—å"
    }
    ```
*   **Response:** JSON `{"message": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Markdown..."}`.

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –†–µ–≤—å—é –¢–µ—Å—Ç-–ø–ª–∞–Ω–∞
–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã –∏ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏.

*   **URL:** `/optimize-tests`
*   **Method:** `POST`
*   **Body (JSON):**
    ```json
    {
      "modules": "Auth",
      "test_cases": "| ID | Steps | ... (—Ç–µ–∫—É—â–∏–π markdown)"
    }
    ```
*   **Response:** Markdown-–æ—Ç—á–µ—Ç —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏.

### 5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ö–æ–¥–∞ (Magic Button)
–ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç-–ø–ª–∞–Ω (—Ç–∞–±–ª–∏—Ü—É) –≤ Python –∫–æ–¥.
**–í–∞–∂–Ω–æ:** –≠–Ω–¥–ø–æ–∏–Ω—Ç —Å–∞–º –ø–æ–Ω–∏–º–∞–µ—Ç —Ç–∏–ø —Ç–µ—Å—Ç–æ–≤ (UI –∏–ª–∏ API) –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º —Ç–∞–±–ª–∏—Ü—ã.

*   **URL:** `/generate-code-pytest`
*   **Method:** `POST`
*   **Body (JSON):**
    ```json
    {
      "url": "https://example.com",
      "general_description": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",
      "approved_test_plan": "| ID | Endpoint | ... (–§–∏–Ω–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)"
    }
    ```
*   **Response:** JSON `{"message": "Python Code String..."}`.
*   **UI Hint:** –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –±–ª–æ–∫–µ –∫–æ–¥–∞ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ (PrismJS/Highlight.js).

### 6. Code Review
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º.

*   **URL:** `/review-code`
*   **Method:** `POST`
*   **Body (JSON):**
    ```json
    {
      "code_snippet": "def test_login(): ...",
      "rules": "–ó–∞–ø—Ä–µ—Ç–∏—Ç—å sleep, —Ç—Ä–µ–±–æ–≤–∞—Ç—å allure step"
    }
    ```
*   **Response:** Markdown-–æ—Ç—á–µ—Ç.

---

## üîÑ User Flows (–°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: UI –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Web Crawler)
1.  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –í–≤–æ–¥–∏—Ç URL —Å–∞–π—Ç–∞ –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω".
2.  **Frontend:** –í—ã–∑—ã–≤–∞–µ—Ç `/generate-ui-tests`.
3.  **–°–∏—Å—Ç–µ–º–∞:** –°–∫–∞—á–∏–≤–∞–µ—Ç HTML, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç DOM, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Ç–µ—Å—Ç–æ–≤.
4.  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –í–∏–¥–∏—Ç —Ç–∞–±–ª–∏—Ü—É. –ó–∞–º–µ—á–∞–µ—Ç, —á—Ç–æ –∑–∞–±—ã–ª–∏ —Ç–µ—Å—Ç –Ω–∞ "Logout".
5.  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –ü–∏—à–µ—Ç –≤ —á–∞—Ç-–∏–Ω–ø—É—Ç: "–î–æ–±–∞–≤—å —Å—Ü–µ–Ω–∞—Ä–∏–π –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã" -> –ù–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–∞–≤–∏—Ç—å".
6.  **Frontend:** –í—ã–∑—ã–≤–∞–µ—Ç `/redact-content` (–æ—Ç–ø—Ä–∞–≤–ª—è—è —Ç–µ–∫—É—â—É—é —Ç–∞–±–ª–∏—Ü—É + –ø—Ä–æ–º—Ç).
7.  **–°–∏—Å—Ç–µ–º–∞:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É.
8.  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –ù–∞–∂–∏–º–∞–µ—Ç "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ö–æ–¥".
9.  **Frontend:** –í—ã–∑—ã–≤–∞–µ—Ç `/generate-code-pytest`.
10. **–°–∏—Å—Ç–µ–º–∞:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥ –Ω–∞ Python (Playwright).

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: API –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Swagger Import)
1.  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª `swagger.json`.
2.  **Frontend:** –í—ã–∑—ã–≤–∞–µ—Ç `/generate-api-tests` (multipart upload).
3.  **–°–∏—Å—Ç–µ–º–∞:** –ü–∞—Ä—Å–∏—Ç Swagger, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É –ø–æ–∫—Ä—ã—Ç–∏—è.
4.  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –ù–∞–∂–∏–º–∞–µ—Ç "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å".
5.  **Frontend:** –í—ã–∑—ã–≤–∞–µ—Ç `/optimize-tests`.
6.  **–°–∏—Å—Ç–µ–º–∞:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—á–µ—Ç: "–î—É–±–ª–∏–∫–∞—Ç—ã –≤ —Ç–µ—Å—Ç–∞—Ö ID_01 –∏ ID_05".
7.  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –£–¥–∞–ª—è–µ—Ç –ª–∏—à–Ω–µ–µ (–∏–ª–∏ –ø—Ä–æ—Å–∏—Ç AI —á–µ—Ä–µ–∑ `/redact-content`).
8.  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –ù–∞–∂–∏–º–∞–µ—Ç "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ö–æ–¥".
9.  **Frontend:** –í—ã–∑—ã–≤–∞–µ—Ç `/generate-code-pytest`.
10. **–°–∏—Å—Ç–µ–º–∞:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥ –Ω–∞ Python (Requests).

---

## üíª –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (Backend)

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
*   Python 3.11 –∏–ª–∏ 3.12
*   –î–æ—Å—Ç—É–ø –∫ OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º—É API (vLLM, Ollama, LM Studio).

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
1.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –±—ç–∫–µ–Ω–¥–∞:
    ```bash
    cd backend
    ```
2.  –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
    ```bash
    python -m venv venv
    source venv/bin/activate  # –î–ª—è Windows: venv\Scripts\activate
    ```
3.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
    ```bash
    pip install -r requirements.txt
    ```
4.  –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ `backend` (–Ω–∞ –æ—Å–Ω–æ–≤–µ `env.txt`):
    ```env
    APP_HOST=0.0.0.0
    APP_PORT=8080
    
    # –ü—Ä–∏–º–µ—Ä –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ vLLM / Ollama
    AI_MODEL_KEY=EMPTY
    AI_MODEL_URL=http://localhost:8000/v1
    AI_MODEL_NAME=Qwen/Qwen3-Coder-480B-A35B-Instruct
    ```
5.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
    ```bash
    python main.py
    ```
    –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger UI –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8080/docs`

---

## üê≥ –ó–∞–ø—É—Å–∫ –≤ Docker

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker-compose` –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞.

1.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `.env` —Å–æ–∑–¥–∞–Ω –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω `env_file` –≤ `docker-compose.yaml`.
2.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
    ```bash
    docker-compose up --build -d
    ```
3.  –ë—ç–∫–µ–Ω–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É `8080`.

---

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (Production)

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx –ø–µ—Ä–µ–¥ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º, —Ç–∞–∫ –∫–∞–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ LLM –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –≤—Ä–µ–º—è (–¥–æ 60 —Å–µ–∫), –∞ —Ñ–∞–π–ª—ã Swagger –º–æ–≥—É—Ç –±—ã—Ç—å –±–æ–ª—å—à–∏–º–∏.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∫–æ–Ω—Ñ–∏–≥ (`/etc/nginx/conf.d/testops.conf`):**

```nginx
server {
    listen 80;
    server_name testops.your-domain.com;

    # –§—Ä–æ–Ω—Ç–µ–Ω–¥ (–µ—Å–ª–∏ —Ä–∞–∑–¥–∞–µ—Ç—Å—è —Å—Ç–∞—Ç–∏–∫–æ–π)
    # location / {
    #     root /var/www/testops-frontend;
    #     try_files $uri /index.html;
    # }

    # –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ API
    location /api/ {
        proxy_pass http://backend:8080; # –ò–º—è —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ docker-compose –∏–ª–∏ localhost
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        
        # === –í–ê–ñ–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò ===
        
        # 1. –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ç–∞–π–º–∞—É—Ç (LLM –¥—É–º–∞–µ—Ç –¥–æ–ª–≥–æ)
        proxy_read_timeout 300s;
        proxy_connect_timeout 300s;
        proxy_send_timeout 300s;

        # 2. –†–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ (–¥–ª—è –±–æ–ª—å—à–∏—Ö Swagger/YAML)
        client_max_body_size 20M;
    }
}
```
